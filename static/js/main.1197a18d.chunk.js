(this["webpackJsonplog-painter"]=this["webpackJsonplog-painter"]||[]).push([[0],{102:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return j}));var a=t(12),r=t(13),o=t(0),l=t.n(o),c=t(103),i=t.n(c),u=t(109),s=t(111),m=t(108),f=t(69),d=t(221),v=t(219),b=t(104),p=t.n(b),g=t(33),h=t(19),y=t(36),E=Object(u.a)((function(){return Object(s.a)({Output:{fontFamily:"\u5fae\u8f6f\u96c5\u9ed1",fontSize:14,padding:"16px 14px",borderColor:"#0000003b","&:hover":{borderColor:"#000000de"},borderStyle:"solid",borderWidth:1,borderRadius:4,maxHeight:200,overflowY:"scroll","& > p":{margin:"0.5em 0"}}})})),j=function(n){var t=n.initState,c=n.onPrevStep,u=n.onRestart,s=Object(g.a)(),b=E(),j=Object(o.useRef)(t.oldConfig),O=Object(o.useRef)(t.config.players||{}),C=Object(o.useState)((function(){return function(e,n){var t=e;return Object(h.a)(n,"removeLinesStartedWithParenthesis")&&(t=t.filter((function(e){return!["\uff08","("].includes(e.content[0][0])}))),Object(h.a)(n,"removeLinesStartedWithDot")&&(t=t.filter((function(e){return!["\u3002","."].includes(e.content[0][0])}))),Object(h.a)(n,"removeLinesStartedWithLenticular")&&(t=t.filter((function(e){return!["\u3010"].includes(e.content[0][0])}))),t}(t.lines,t.config.general||{})})),x=Object(r.a)(C,1)[0],w=Object(o.useState)({open:!1}),S=Object(r.a)(w,2),k=S[0],N=S[1];console.log(k);var L=function(e){N({body:e,open:!0})},I=Object(o.useState)((function(){var n=new i.a("#clipboard-button",{target:function(){var e=document.getElementById("result-body");if(null==e)throw L("\u590d\u5236\u9519\u8bef\uff1a\u627e\u4e0d\u5230\u590d\u5236\u5bf9\u8c61"),new Error("\u627e\u4e0d\u5230\u590d\u5236\u5bf9\u8c61");return e}});return n.on("success",(function(){e((function(){return L("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff01")}))})),n.on("error",(function(e){L("\u590d\u5236\u9519\u8bef\uff01\u8bf7\u53cc\u51fb\u6587\u672c\u6846\u624b\u52a8\u590d\u5236\u5427\uff01"),console.error(e)})),n})),P=Object(r.a)(I,1)[0];return Object(o.useEffect)((function(){return function(){P.destroy()}})),n.show?l.a.createElement(f.a,{container:!0,className:s.Container},l.a.createElement(f.a,{item:!0,xs:12,className:s.Body},l.a.createElement("div",{className:b.Output,onDoubleClick:function(){var e=window.getSelection();if(e){var n=document.getElementById("result-body");if(n){var t=document.createRange();t.selectNode(n),e.removeAllRanges(),e.addRange(t)}}},id:"result-body"},l.a.createElement(v.a,{style:{float:"right",marginTop:-15},id:"clipboard-button"},l.a.createElement(p.a,null)),x.map((function(e,n){var t=e.playerId,a=e.content,r=O.current[t];return r.enabled?l.a.createElement("p",{key:n,style:{color:r.color}},"<".concat(r.displayName,"> "),a.map((function(e,n){return(0===n?[]:[l.a.createElement("br",{key:"br-".concat(n)})]).concat([l.a.createElement("span",{key:n},e)])}))):null})))),l.a.createElement(f.a,{item:!0,xs:12,justify:"flex-end",className:s.Control},l.a.createElement(m.a,{variant:"outlined",color:"secondary",className:s.ControlButton,onClick:function(){Object(y.b)(j.current),c()}},"\u4e0a\u4e00\u6b65"),l.a.createElement(m.a,{variant:"contained",className:s.ControlButton,style:{backgroundColor:"#d4d45f"},onClick:u},"\u518d\u505a\u4e00\u56e2")),l.a.createElement(d.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:k.open,autoHideDuration:6e3,onClose:function(){console.trace(),N(Object(a.a)({},k,{open:!1}))},message:k.body})):null}}).call(this,t(202).setImmediate)},121:function(e,n,t){e.exports=t(217)},129:function(e,n,t){},130:function(e,n,t){},19:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return u}));var a=t(12),r=t(106),o=t(53),l=t.n(o),c={removeLinesStartedWithParenthesis:!1,removeLinesStartedWithDot:!1,removeLinesStartedWithLenticular:!1},i=function(e,n){return e[n]||c[n]},u=[{value:"black",name:"\u9ed1\u8272"},{value:"silver",name:"\u7070\u8272"},{value:"red",name:"\u7ea2\u8272"},{value:"green",name:"\u7eff\u8272"},{value:"orange",name:"\u6a58\u8272"},{value:"purple",name:"\u7d2b\u8272"},{value:"teal",name:"\u84dd\u7eff"},{value:"fuchsia",name:"\u6843\u7ea2"},{value:"yellow",name:"\u9ec4\u8272"},{value:"beige",name:"\u7c73\u8272"},{value:"brown",name:"\u68d5\u8272"},{value:"navy",name:"\u6df1\u84dd"},{value:"maroon",name:"\u7d2b\u7ea2"},{value:"limegreen",name:"\u83b1\u59c6"},{value:"white",name:"\u767d\u8272"},{value:"brown",name:"\u84dd\u8272"},{value:"pink",name:"\u7c89\u7ea2"}].map((function(e){var n=e.value,t=Object(r.a)(e,["value"]);return Object(a.a)({},t,{value:n,isLight:l()(n).isLight()})}))},217:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(10),l=t.n(o),c=t(95),i=t.n(c),u=t(96),s=t.n(u),m=t(109),f=t(111),d=t(105),v=t(271),b=t(269),p=t(280),g=t(272),h=t(219),y=t(270),E=t(68),j=(t(129),t(130),t(12)),O=t(13),C=t(108),x=t(69),w=t(275),S=t(276),k=t(263),N=t(261),L=t(262),I=t(260),P=function(e){var n=e.open,t=e.onClose,a=e.body;return r.a.createElement("div",null,r.a.createElement(S.a,{open:n,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(I.a,null,"\u51fa\u9519\u5566"),r.a.createElement(N.a,null,r.a.createElement(L.a,{id:"alert-dialog-description"},a)),r.a.createElement(k.a,null,r.a.createElement(C.a,{onClick:t,color:"primary",autoFocus:!0},"\u597d\u7684"))))},R=t(33),$=t(98),W=t.n($),B=t(19),D=B.b.map((function(e){return e.value}));function z(e,n){var t=!0,a=!1,r=void 0;try{for(var o,l=n[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var c=o.value;if(e[c])return e[c]}}catch(i){a=!0,r=i}finally{try{t||null==l.return||l.return()}finally{if(a)throw r}}return null}function F(e,n){var t={};return W()(n,(function(e){t[e.color]=!0})),e.find((function(e){return!t[e]}))||"black"}var H=t(99),V=t.n(H),q=t(100),A=t.n(q),J=t(101),M=t.n(J),T=t(41),U=t.n(T);function G(e){if(null==e)return null;for(var n=e.content,t=/^.*\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f( \u91cd\u65b0\u7f16\u8f91)?$/,a=/^.*\u64a4\u56de\u4e86\u6210\u5458.*\u7684\u4e00\u6761\u6d88\u606f$/,r=/^.*\u64a4\u56de\u4e86\u4e00\u6761\u6210\u5458\u6d88\u606f$/,o=/^\u4f60\u548c.*\u6709\d+\u4e2a\u5171\u540c\u597d\u53cb\uff0c\u70b9\u51fb\u6dfb\u52a0\u597d\u53cb\u3002$/,l=/^.*\u52a0\u5165\u672c\u7fa4\u3002$/,c=/^.*\u9080\u8bf7.*\u52a0\u5165\u4e86\u672c\u7fa4\u3002$/,i=n.length-1;i>=0&&[/^ *$/,t,a,r,o,l,c].some((function(e){return e.exec(n[i])}));i--);return e.content=e.content.slice(0,i+1),e}var K=/\(\d+\)|<.+@.+\..+>/,Y=/(?:\u3010(.{1,6})\u3011)?/,_=/\d{1,2}:\d{2}:\d{2}(?: (?:AM|PM))?/;function Q(e){if(null==e)return null;for(var n=e.content,t=/^\u2014 \u2014  \d{4}-\d{1,2}-\d{1,2}  \u2014 \u2014$/,a=n.length-1;a>=0&&[/^ *$/,t].some((function(e){return e.exec(n[a])}));a--);return e.content=e.content.slice(0,a+1),e}function X(e){if(null==e)return null;for(var n=e.content,t=/^ \d{4}-\d{2}-\d{2}$/,a=new RegExp("^".concat(_.source,".*\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f$")),r=new RegExp("^".concat(_.source,".*\u64a4\u56de\u4e86\u6210\u5458.*\u7684\u4e00\u6761\u6d88\u606f$")),o=new RegExp("^".concat(_.source,".*\u64a4\u56de\u4e86\u4e00\u6761\u6210\u5458\u6d88\u606f$")),l=new RegExp("^".concat(_.source,".*\u52a0\u5165\u672c\u7fa4\u3002$")),c=n.length-1;c>=0&&[/^ *$/,t,a,r,o,l].some((function(e){return e.exec(n[c])}));c--);return e.content=e.content.slice(0,c+1),e}function Z(e){if(null==e)return null;for(var n=e.content;n.length>0&&""===n[0].trim();)n.splice(0,1);for(;n.length>0&&""===n[n.length-1].trim();)n.splice(n.length-1,1);return 0===n.length?null:e}function ee(e){return M()(e,"()<>")}var ne={headerParser:function(e){var n=new RegExp("\\d{4}-\\d{2}-\\d{2} ".concat(_.source)),t=new RegExp("^(".concat(n.source,") (.*)(").concat(K.source,")$")).exec(e);if(!t)return null;var a=Object(O.a)(t,4),r=(a[0],a[1]);return{player:{name:a[2],number:ee(a[3])},time:r}},logLineConverter:function(e){return["10000","1000000"].includes(e.player.number||"")?null:Z(e)}},te={headerParser:function(e){var n=new RegExp("\\d{1,4}\\/\\d{1,2}\\/\\d{1,4} ".concat(_.source)),t=new RegExp("^".concat(Y.source,"(.*?) (").concat(n.source,")$")).exec(e);if(!t)return null;var a=Object(O.a)(t,4),r=(a[0],a[1]);return{player:{name:a[2],title:r},time:a[3]}},logLineConverter:function(e){return U()(G,Z)(e)}},ae={headerParser:function(e){var n=new RegExp("^".concat(Y.source,"(.*) (").concat(_.source,")$")).exec(e);if(!n)return null;var t=Object(O.a)(n,4),a=(t[0],t[1]);return{player:{name:t[2],title:a},time:t[3]}},logLineConverter:function(e){return U()(G,Z)(e)}},re={headerParser:function(e){var n=new RegExp("^".concat(Y.source,"(.*?)(").concat(K.source,") (").concat(_.source,")$")).exec(e);if(!n)return null;var t=Object(O.a)(n,5),a=(t[0],t[1]),r=t[2],o=t[3],l=t[4];return{player:{name:r,title:a,number:ee(o)},time:l}},logLineConverter:function(e){return U()(X,Z)(e)}},oe={headerParser:function(e){var n=/^(.*?) {2}(\d{1,2}:\d{2}:\d{2}) *$/.exec(e);if(!n)return null;var t=Object(O.a)(n,3);t[0];return{player:{name:t[1]},time:t[2]}},logLineConverter:function(e){return U()(Q,Z)(e)}};function le(e){var n=[];return e.number&&n.push("qq:".concat(e.number)),n.push("name:".concat(e.name)),n}function ce(e){return function(e){var n=[],t={},a=!0,r=!1,o=void 0;try{for(var l,c=e.logLines[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var i=l.value,u=i.player,s=i.time,m=i.content,f=le(u),d=f[0];t[d]||(t[d]={playerId:d,allPlayerIds:f,name:u.name,number:u.number}),n.push({playerId:d,time:s,title:u.title,content:m})}}catch(v){r=!0,o=v}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return{lines:n,players:V()(t)}}(function(e){var n=[],t=void 0,a=!0,r=!1,o=void 0;try{for(var l,c=function(){var e=l.value,a=function(){if(t)return t.headerParser(e);for(var n=0,a=[re,oe,ne,te,ae];n<a.length;n++){var r=a[n],o=r.headerParser(e);if(o)return t=r,o}return null}();if(a)n.push(Object(j.a)({},a,{content:[]}));else if(t){var r=n[n.length-1];r&&r.content.push(e)}},i=e.split("\n")[Symbol.iterator]();!(a=(l=i.next()).done);a=!0)c()}catch(u){r=!0,o=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return t?{logLines:A()(n.map(t.logLineConverter))}:{logLines:[]}}(e))}var ie=function(e){var n=e.onNextStep,t=Object(R.a)(),o=Object(a.useState)(""),l=Object(O.a)(o,2),c=l[0],i=l[1],u=Object(a.useState)({open:!1}),s=Object(O.a)(u,2),m=s[0],f=s[1];if(!e.show)return null;return r.a.createElement(x.a,{container:!0,className:t.Container},r.a.createElement(x.a,{item:!0,xs:12,className:t.Body},r.a.createElement(w.a,{id:"outlined-basic",label:"\u539f\u6587",placeholder:"\u628a\u539f\u6587\u7c98\u8d34\u5230\u8fd9\u91cc\uff0c\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\u3002",variant:"outlined",multiline:!0,fullWidth:!0,rows:10,className:"Source-textfield",onChange:function(e){i(e.target.value)},value:c})),r.a.createElement(x.a,{item:!0,xs:12,justify:"flex-end",className:t.Control},r.a.createElement(C.a,{variant:"contained",color:"primary",disabled:c.length<5,className:t.ControlButton,onClick:function(){var e=function(e){var n=ce(e);if(0!==n.players.length&&0!==n.lines.length)return n;f({open:!0,body:"\u65e0\u6cd5\u4ece\u8fd9\u6bb5\u8bb0\u5f55\u4e2d\u627e\u5230\u53ef\u8bc6\u522b\u7684\u90e8\u5206\uff01\u8bf7\u68c0\u67e5\u540e\u518d\u8bd5\u4e00\u6b21\u5427\uff01"})}(c);e&&n(e)}},"\u4e0b\u4e00\u6b65")),r.a.createElement(P,Object.assign({onClose:function(){return f(Object(j.a)({},m,{open:!1}))}},m)))},ue=t(48),se=t(53),me=t.n(se),fe=t(277),de=t(278),ve=t(268),be=t(273),pe=t(267),ge=Object(m.a)((function(){return Object(f.a)({PlayerConfig:{},Center:{display:"flex",alignItems:"center"}})})),he=function(e){var n=ge();return r.a.createElement(x.a,{item:!0,xs:6},r.a.createElement(x.a,{container:!0},r.a.createElement(x.a,{item:!0,xs:8},r.a.createElement(w.a,{defaultValue:e.name,variant:"outlined",fullWidth:!0,onBlur:function(n){e.setName(n.target.value||"")}})),r.a.createElement(x.a,{item:!0,xs:4,className:n.Center},r.a.createElement(x.a,{container:!0},r.a.createElement(pe.a,{row:!0,className:n.Center},r.a.createElement(de.a,null,r.a.createElement(fe.a,{checked:e.enabled,onChange:function(n,t){e.setEnabled(t)},value:"primary"})),r.a.createElement(de.a,{style:e.enabled?{}:{visibility:"hidden"}},r.a.createElement(be.a,{style:{backgroundColor:e.color,color:me()(e.color).isLight()?"black":"white",padding:4},native:!0,value:e.color,onChange:function(n){e.setColor(n.target.value)}},B.b.map((function(e){var n=e.value,t=e.name,a=e.isLight;return r.a.createElement("option",{key:n,value:n,style:{backgroundColor:n,color:a?"black":"white"}},t||n)})))))))))},ye=function(e){var n=e.playerIds,t=e.players,a=e.setPlayer;return r.a.createElement(x.a,{container:!0},n.map((function(e){var n=t[e];return r.a.createElement(he,{key:e,name:n.displayName,setName:function(t){a(e,Object(j.a)({},n,{displayName:t}))},enabled:n.enabled,setEnabled:function(t){a(e,Object(j.a)({},n,{enabled:t}))},color:n.color,setColor:function(t){a(e,Object(j.a)({},n,{color:t}))}})})))},Ee=function(e){var n=e.value,t=e.setValue;return r.a.createElement(pe.a,null,r.a.createElement(ve.a,{control:r.a.createElement(fe.a,{checked:Object(B.a)(n,"removeLinesStartedWithParenthesis"),onChange:function(e){t(Object(j.a)({},n,{removeLinesStartedWithParenthesis:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5(\uff08\u5f00\u5934\u7684\u884c"}),r.a.createElement(ve.a,{control:r.a.createElement(fe.a,{checked:Object(B.a)(n,"removeLinesStartedWithDot"),onChange:function(e){t(Object(j.a)({},n,{removeLinesStartedWithDot:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5.\u3002\u5f00\u5934\u7684\u884c"}),r.a.createElement(ve.a,{control:r.a.createElement(fe.a,{checked:Object(B.a)(n,"removeLinesStartedWithLenticular"),onChange:function(e){t(Object(j.a)({},n,{removeLinesStartedWithLenticular:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5\u3010\u5f00\u5934\u7684\u884c"}))},je=function(e){var n=e.initState,t=e.onPrevStep,o=e.onNextStep,l=Object(R.a)(),c=Object(a.useState)((function(){return n.config.players||{}})),i=Object(O.a)(c,2),u=i[0],s=i[1],m=Object(a.useRef)(n.playerIds),f=Object(a.useState)((function(){return n.config.general||{}})),d=Object(O.a)(f,2),v=d[0],b=d[1],p=Object(a.useRef)(n.lines);return e.show?r.a.createElement(x.a,{container:!0,className:l.Container},r.a.createElement(x.a,{item:!0,xs:12,className:l.Body},r.a.createElement(Ee,{value:v,setValue:b}),r.a.createElement(ye,{playerIds:m.current,players:u,setPlayer:function(e,n){s(Object(j.a)({},u,Object(ue.a)({},e,n)))}})),r.a.createElement(x.a,{item:!0,xs:12,justify:"flex-end",className:l.Control},r.a.createElement(C.a,{variant:"outlined",color:"secondary",className:l.ControlButton,onClick:t},"\u4e0a\u4e00\u6b65"),r.a.createElement(C.a,{variant:"contained",color:"primary",className:l.ControlButton,onClick:function(){o({lines:p.current,newConfig:{players:u,general:v}})}},"\u4e0b\u4e00\u6b65"))):null},Oe=t(102),Ce=function(e){var n=e.onInit1,t=e.step1,o=e.onInit2,l=e.step2,c=e.onInit3,i=e.step3,u=Object(a.useState)(0),s=Object(O.a)(u,2),m=s[0],f=s[1],d=Object(a.useState)([]),v=Object(O.a)(d,2),b=v[0],p=v[1],g=function(){f(m+1),p([n()])};return 0===b.length&&g(),r.a.createElement(x.a,{container:!0,xs:12},null==b[0]?null:r.a.createElement(t,{key:"".concat(m,"-1"),show:1===b.length,initState:b[0],onNextStep:function(e){p([b[0],o(e)])}}),null==b[1]?null:r.a.createElement(l,{key:"".concat(m,"-2"),show:2===b.length,initState:b[1],onPrevStep:function(){p([b[0]])},onNextStep:function(e){p([b[0],b[1],c(e)])}}),null==b[2]?null:r.a.createElement(i,{key:"".concat(m,"-3"),show:3===b.length,initState:b[2],onPrevStep:function(){p([b[0],b[1]])},onRestart:g}))},xe=t(36),we=Object(m.a)((function(){return Object(f.a)({logo:{marginRight:15,backgroundColor:"white"},horizontalFill:{flex:"1 0 auto"},toolbarIcon:{height:24,width:24,fill:"white"}})})),Se=function(e){var n=e.repoUrl,t=we();return r.a.createElement(b.a,{position:"static"},r.a.createElement(y.a,null,r.a.createElement(p.a,{alt:"Logo",src:"/android-chrome-512x512.png",className:t.logo}),r.a.createElement(E.a,{variant:"h6",className:t.horizontalFill},"DK\u7684\u8dd1\u56e2\u8bb0\u5f55\u7740\u8272\u5668"),r.a.createElement(h.a,{"aria-label":"GitHub",href:n,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(i.a,{svg:s.a.svg,className:t.toolbarIcon}))))},ke=function(e){return r.a.createElement(Ce,{onInit1:function(){return{}},step1:ie,onInit2:function(e){var n=function(e,n){var t=e.players,a=e.lines,r=n.players||{},o={},l=!0,c=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var m=u.value,f=z(r,m.allPlayerIds);f||(f={enabled:!0,displayName:m.name,color:F(D,o)});var d=!0,v=!1,b=void 0;try{for(var p,g=m.allPlayerIds[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){o[p.value]=f}}catch(h){v=!0,b=h}finally{try{d||null==g.return||g.return()}finally{if(v)throw b}}}}catch(h){c=!0,i=h}finally{try{l||null==s.return||s.return()}finally{if(c)throw i}}return{lines:a,playerIds:t.map((function(e){return e.playerId})),nextConfig:Object(j.a)({},n,{players:Object(j.a)({},r,{},o)})}}(e,Object(xe.a)());return{lines:n.lines,playerIds:n.playerIds,config:n.nextConfig}},step2:je,onInit3:function(e){var n=Object(xe.a)();return Object(xe.b)(e.newConfig),{lines:e.lines,config:e.newConfig,oldConfig:n}},step3:Oe.a})},Ne=Object(d.a)({palette:{primary:{main:"#795548"},secondary:{main:"#00897b"}}}),Le=function(){return r.a.createElement(v.a,{theme:Ne},r.a.createElement("div",{className:"root"},r.a.createElement(Se,{repoUrl:"https://github.com/dkwingsmt/log-painter"}),r.a.createElement(g.a,{maxWidth:"md",className:"Body-container"},r.a.createElement(ke,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(109),r=t(111),o=Object(a.a)((function(e){return Object(r.a)({Control:{display:"flex",marginTop:20},Body:{},Container:{},ControlButton:{width:100,marginLeft:10}})}))},36:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return c}));var a=t(67),r=t.n(a),o={players:{}};function l(){return r.a.get("config")||o}function c(e){r.a.set("config",e)}}},[[121,1,2]]]);
//# sourceMappingURL=main.1197a18d.chunk.js.map