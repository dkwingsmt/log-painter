(this["webpackJsonplog-painter"]=this["webpackJsonplog-painter"]||[]).push([[0],{132:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j}));var a=n(13),r=n(14),l=n(0),o=n.n(l),c=n(133),i=n.n(c),u=n(139),s=n(141),m=n(138),d=n(87),f=n(289),v=n(287),b=n(134),h=n.n(b),p=n(36),y=n(19),g=n(39),E=Object(u.a)((function(){return Object(s.a)({Output:{fontFamily:"\u5fae\u8f6f\u96c5\u9ed1",fontSize:14,padding:"16px 14px",borderColor:"#0000003b","&:hover":{borderColor:"#000000de"},borderStyle:"solid",borderWidth:1,borderRadius:4,maxHeight:200,overflowY:"scroll","& > p":{margin:"0.5em 0"}}})})),j=function(t){var n=t.initState,c=t.onPrevStep,u=t.onRestart,s=Object(p.a)(),b=E(),j=Object(l.useRef)(n.oldConfig),O=Object(l.useRef)(n.config.players||{}),C=Object(l.useState)((function(){return function(e,t){var n=e;return Object(y.a)(t,"removeLinesStartedWithParenthesis")&&(n=n.filter((function(e){return!["\uff08","("].includes(e.content[0][0])}))),Object(y.a)(t,"removeLinesStartedWithDot")&&(n=n.filter((function(e){return!["\u3002","."].includes(e.content[0][0])}))),Object(y.a)(t,"removeLinesStartedWithLenticular")&&(n=n.filter((function(e){return!["\u3010"].includes(e.content[0][0])}))),n}(n.lines,n.config.general||{})})),S=Object(r.a)(C,1)[0],w=Object(l.useState)({open:!1}),x=Object(r.a)(w,2),k=x[0],N=x[1];console.log(k);var L=function(e){N({body:e,open:!0})},I=Object(l.useState)((function(){var t=new i.a("#clipboard-button",{target:function(){var e=document.getElementById("result-body");if(null==e)throw L("\u590d\u5236\u9519\u8bef\uff1a\u627e\u4e0d\u5230\u590d\u5236\u5bf9\u8c61"),new Error("\u627e\u4e0d\u5230\u590d\u5236\u5bf9\u8c61");return e}});return t.on("success",(function(){e((function(){return L("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\uff01")}))})),t.on("error",(function(e){L("\u590d\u5236\u9519\u8bef\uff01\u8bf7\u53cc\u51fb\u6587\u672c\u6846\u624b\u52a8\u590d\u5236\u5427\uff01"),console.error(e)})),t})),P=Object(r.a)(I,1)[0];return Object(l.useEffect)((function(){return function(){P.destroy()}})),t.show?o.a.createElement(d.a,{container:!0,className:s.Container},o.a.createElement(d.a,{item:!0,xs:12,className:s.Body},o.a.createElement("div",{className:b.Output,onDoubleClick:function(){var e=window.getSelection();if(e){var t=document.getElementById("result-body");if(t){var n=document.createRange();n.selectNode(t),e.removeAllRanges(),e.addRange(n)}}},id:"result-body"},o.a.createElement(v.a,{style:{float:"right",marginTop:-15},id:"clipboard-button"},o.a.createElement(h.a,null)),S.map((function(e,t){var n=e.playerId,a=e.content,r=O.current[n];return r.enabled?o.a.createElement("p",{key:t,style:{color:r.color}},"<".concat(r.displayName,"> "),a.map((function(e,t){return(0===t?[]:[o.a.createElement("br",{key:"br-".concat(t)})]).concat([o.a.createElement("span",{key:t},e)])}))):null})))),o.a.createElement(d.a,{item:!0,xs:12,justify:"flex-end",className:s.Control},o.a.createElement(m.a,{variant:"outlined",color:"secondary",className:s.ControlButton,onClick:function(){Object(g.b)(j.current),c()}},"\u4e0a\u4e00\u6b65"),o.a.createElement(m.a,{variant:"contained",className:s.ControlButton,style:{backgroundColor:"#d4d45f"},onClick:u},"\u518d\u505a\u4e00\u56e2")),o.a.createElement(f.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:k.open,autoHideDuration:6e3,onClose:function(){console.trace(),N(Object(a.a)({},k,{open:!1}))},message:k.body})):null}}).call(this,n(270).setImmediate)},151:function(e,t,n){e.exports=n(285)},159:function(e,t,n){},160:function(e,t,n){},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));var a=n(13),r=n(136),l=n(60),o=n.n(l),c={removeLinesStartedWithParenthesis:!1,removeLinesStartedWithDot:!1,removeLinesStartedWithLenticular:!1},i=function(e,t){return e[t]||c[t]},u=[{value:"black",name:"\u9ed1\u8272"},{value:"silver",name:"\u7070\u8272"},{value:"red",name:"\u7ea2\u8272"},{value:"green",name:"\u7eff\u8272"},{value:"orange",name:"\u6a58\u8272"},{value:"purple",name:"\u7d2b\u8272"},{value:"teal",name:"\u84dd\u7eff"},{value:"fuchsia",name:"\u6843\u7ea2"},{value:"yellow",name:"\u9ec4\u8272"},{value:"beige",name:"\u7c73\u8272"},{value:"brown",name:"\u68d5\u8272"},{value:"navy",name:"\u6df1\u84dd"},{value:"maroon",name:"\u7d2b\u7ea2"},{value:"limegreen",name:"\u83b1\u59c6"},{value:"white",name:"\u767d\u8272"},{value:"brown",name:"\u84dd\u8272"},{value:"pink",name:"\u7c89\u7ea2"}].map((function(e){var t=e.value,n=Object(r.a)(e,["value"]);return Object(a.a)({},n,{value:t,isLight:o()(t).isLight()})}))},285:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(10),o=n.n(l),c=n(124),i=n.n(c),u=n(125),s=n.n(u),m=n(139),d=n(141),f=n(135),v=n(339),b=n(337),h=n(348),p=n(340),y=n(287),g=n(338),E=n(86),j=(n(159),n(160),n(13)),O=n(14),C=n(138),S=n(87),w=n(343),x=n(344),k=n(331),N=n(329),L=n(330),I=n(328),P=function(e){var t=e.open,n=e.onClose,a=e.body;return r.a.createElement("div",null,r.a.createElement(x.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(I.a,null,"\u51fa\u9519\u5566"),r.a.createElement(N.a,null,r.a.createElement(L.a,{id:"alert-dialog-description"},a)),r.a.createElement(k.a,null,r.a.createElement(C.a,{onClick:n,color:"primary",autoFocus:!0},"\u597d\u7684"))))},W=n(36),B=n(127),R=n.n(B),$=n(128),D=n.n($),M=n(19),z=M.b.map((function(e){return e.value}));function A(e,t){var n=!0,a=!1,r=void 0;try{for(var l,o=t[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var c=l.value;if(e[c])return e[c]}}catch(i){a=!0,r=i}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return null}function F(e,t){var n={};return R()(t,(function(e){n[e.color]=!0})),e.find((function(e){return!n[e]}))||"black"}var H=n(129),V=n.n(H),q=n(130),J=n.n(q),T=n(131),U=n.n(T),G=n(84),K=n.n(G);function Y(e){if(null==e)return null;for(var t=e.content,n=[],a=0;a<t.length-2;a++){""===t[a]&&(t[a+1].match(/^.*\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f( \u91cd\u65b0\u7f16\u8f91)?$/)||t[a+1].match(/^\u4f60\u548c.*\u6709\d+\u4e2a\u5171\u540c\u597d\u53cb\uff0c\u70b9\u51fb\u6dfb\u52a0\u597d\u53cb\u3002$/)||t[a+1].match(/^.*\u52a0\u5165\u672c\u7fa4\u3002$/)||t[a+1].match(/^.*\u9080\u8bf7.*\u52a0\u5165\u4e86\u672c\u7fa4\u3002$/))&&(n.push(a),n.push(a+1),a++)}n.reverse();for(var r=0,l=n;r<l.length;r++){var o=l[r];t.splice(o,1)}return e}function _(e){if(null==e)return null;for(var t=e.content;t.length>0&&""===t[0].trim();)t.splice(0,1);for(;t.length>0&&""===t[t.length-1].trim();)t.splice(t.length-1,1);return 0===t.length?null:e}var Q={headerParser:function(e){var t=new RegExp("^".concat(/(\d{4}-\d{2}-\d{2} \d{1,2}:\d{2}:\d{2}(?: (?:AM|PM))?) (.*?)/.source).concat(/(\(\d+\)|<.+@.+\..+>)/.source,"$")).exec(e);if(!t)return null;var n=Object(O.a)(t,4),a=(n[0],n[1]),r=n[2],l=n[3];return{player:{name:r,number:U()(l,"()<>")},time:a}},logLineConverter:function(e){return["10000","1000000"].includes(e.player.number||"")?null:_(e)}},X={headerParser:function(e){var t=/^(?:\u3010(.{1,6})\u3011)?(.*?) (\d{1,4}\/\d{1,2}\/\d{1,4} \d{1,2}:\d{2}:\d{2}(?: (?:AM|PM))?)$/.exec(e);if(!t)return null;var n=Object(O.a)(t,4),a=(n[0],n[1]);return{player:{name:n[2],title:a},time:n[3]}},logLineConverter:function(e){return K()(Y,_)(e)}},Z={headerParser:function(e){var t=/^(?:\u3010(.{1,6})\u3011)?(.*) (\d{1,2}:\d{2}:\d{2}(?: (?:AM|PM)))?$/.exec(e);if(!t)return null;var n=Object(O.a)(t,4),a=(n[0],n[1]);return{player:{name:n[2],title:a},time:n[3]}},logLineConverter:function(e){return K()(Y,_)(e)}},ee={headerParser:function(e){var t=/^(.*?) {2}(\d{1,2}:\d{2}:\d{2}) *$/.exec(e);if(!t)return null;var n=Object(O.a)(t,3);n[0];return{player:{name:n[1]},time:n[2]}},logLineConverter:function(e){return _(e)}};function te(e){var t=[];return e.number&&t.push("qq:".concat(e.number)),t.push("name:".concat(e.name)),t}function ne(e){return function(e){var t=[],n={},a=!0,r=!1,l=void 0;try{for(var o,c=e.logLines[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var i=o.value,u=i.player,s=i.time,m=i.content,d=te(u),f=d[0];n[f]||(n[f]={playerId:f,allPlayerIds:d,name:u.name,number:u.number}),t.push({playerId:f,time:s,title:u.title,content:m})}}catch(v){r=!0,l=v}finally{try{a||null==c.return||c.return()}finally{if(r)throw l}}return{lines:t,players:V()(n)}}(function(e){var t=[],n=void 0,a=!0,r=!1,l=void 0;try{for(var o,c=function(){var e=o.value,a=function(){if(n)return n.headerParser(e);for(var t=0,a=[ee,Q,X,Z];t<a.length;t++){var r=a[t],l=r.headerParser(e);if(l)return n=r,l}return null}();if(a)t.push(Object(j.a)({},a,{content:[]}));else if(n){var r=t[t.length-1];r&&r.content.push(e)}},i=e.split("\n")[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)c()}catch(u){r=!0,l=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n?{logLines:J()(t.map(n.logLineConverter))}:{logLines:[]}}(e))}var ae=function(e){var t=e.onNextStep,n=Object(W.a)(),l=Object(a.useState)(""),o=Object(O.a)(l,2),c=o[0],i=o[1],u=Object(a.useState)({open:!1}),s=Object(O.a)(u,2),m=s[0],d=s[1];if(!e.show)return null;return r.a.createElement(S.a,{container:!0,className:n.Container},r.a.createElement(S.a,{item:!0,xs:12,className:n.Body},r.a.createElement(w.a,{id:"outlined-basic",label:"\u539f\u6587",placeholder:"\u628a\u539f\u6587\u7c98\u8d34\u5230\u8fd9\u91cc\uff0c\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\u3002",variant:"outlined",multiline:!0,fullWidth:!0,rows:10,className:"Source-textfield",onChange:function(e){i(e.target.value)},value:c})),r.a.createElement(S.a,{item:!0,xs:12,justify:"flex-end",className:n.Control},r.a.createElement(C.a,{variant:"contained",color:"primary",disabled:c.length<5,className:n.ControlButton,onClick:function(){var e=function(e){var t=ne(e);if(0!==t.players.length&&0!==t.lines.length)return t;d({open:!0,body:"\u65e0\u6cd5\u4ece\u8fd9\u6bb5\u8bb0\u5f55\u4e2d\u627e\u5230\u53ef\u8bc6\u522b\u7684\u90e8\u5206\uff01\u8bf7\u68c0\u67e5\u540e\u518d\u8bd5\u4e00\u6b21\u5427\uff01"})}(c);e&&t(e)}},"\u4e0b\u4e00\u6b65")),r.a.createElement(P,Object.assign({onClose:function(){return d(Object(j.a)({},m,{open:!1}))}},m)))},re=n(55),le=n(60),oe=n.n(le),ce=n(345),ie=n(346),ue=n(336),se=n(341),me=n(335),de=Object(m.a)((function(){return Object(d.a)({PlayerConfig:{},Center:{display:"flex",alignItems:"center"}})})),fe=function(e){var t=de();return r.a.createElement(S.a,{item:!0,xs:6},r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:8},r.a.createElement(w.a,{defaultValue:e.name,variant:"outlined",fullWidth:!0,onBlur:function(t){e.setName(t.target.value||"")}})),r.a.createElement(S.a,{item:!0,xs:4,className:t.Center},r.a.createElement(S.a,{container:!0},r.a.createElement(me.a,{row:!0,className:t.Center},r.a.createElement(ie.a,null,r.a.createElement(ce.a,{checked:e.enabled,onChange:function(t,n){e.setEnabled(n)},value:"primary"})),r.a.createElement(ie.a,{style:e.enabled?{}:{visibility:"hidden"}},r.a.createElement(se.a,{style:{backgroundColor:e.color,color:oe()(e.color).isLight()?"black":"white",padding:4},native:!0,value:e.color,onChange:function(t){e.setColor(t.target.value)}},M.b.map((function(e){var t=e.value,n=e.name,a=e.isLight;return r.a.createElement("option",{key:t,value:t,style:{backgroundColor:t,color:a?"black":"white"}},n||t)})))))))))},ve=function(e){var t=e.playerIds,n=e.players,a=e.setPlayer;return r.a.createElement(S.a,{container:!0},t.map((function(e){var t=n[e];return r.a.createElement(fe,{key:e,name:t.displayName,setName:function(n){a(e,Object(j.a)({},t,{displayName:n}))},enabled:t.enabled,setEnabled:function(n){a(e,Object(j.a)({},t,{enabled:n}))},color:t.color,setColor:function(n){a(e,Object(j.a)({},t,{color:n}))}})})))},be=function(e){var t=e.value,n=e.setValue;return r.a.createElement(me.a,null,r.a.createElement(ue.a,{control:r.a.createElement(ce.a,{checked:Object(M.a)(t,"removeLinesStartedWithParenthesis"),onChange:function(e){n(Object(j.a)({},t,{removeLinesStartedWithParenthesis:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5(\uff08\u5f00\u5934\u7684\u884c"}),r.a.createElement(ue.a,{control:r.a.createElement(ce.a,{checked:Object(M.a)(t,"removeLinesStartedWithDot"),onChange:function(e){n(Object(j.a)({},t,{removeLinesStartedWithDot:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5.\u3002\u5f00\u5934\u7684\u884c"}),r.a.createElement(ue.a,{control:r.a.createElement(ce.a,{checked:Object(M.a)(t,"removeLinesStartedWithLenticular"),onChange:function(e){n(Object(j.a)({},t,{removeLinesStartedWithLenticular:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5\u3010\u5f00\u5934\u7684\u884c"}))},he=function(e){var t=e.initState,n=e.onPrevStep,l=e.onNextStep,o=Object(W.a)(),c=Object(a.useState)((function(){return t.config.players||{}})),i=Object(O.a)(c,2),u=i[0],s=i[1],m=Object(a.useRef)(t.playerIds),d=Object(a.useState)((function(){return t.config.general||{}})),f=Object(O.a)(d,2),v=f[0],b=f[1],h=Object(a.useRef)(t.lines);return e.show?r.a.createElement(S.a,{container:!0,className:o.Container},r.a.createElement(S.a,{item:!0,xs:12,className:o.Body},r.a.createElement(be,{value:v,setValue:b}),r.a.createElement(ve,{playerIds:m.current,players:u,setPlayer:function(e,t){s(Object(j.a)({},u,Object(re.a)({},e,t)))}})),r.a.createElement(S.a,{item:!0,xs:12,justify:"flex-end",className:o.Control},r.a.createElement(C.a,{variant:"outlined",color:"secondary",className:o.ControlButton,onClick:n},"\u4e0a\u4e00\u6b65"),r.a.createElement(C.a,{variant:"contained",color:"primary",className:o.ControlButton,onClick:function(){l({lines:h.current,newConfig:{players:u,general:v}})}},"\u4e0b\u4e00\u6b65"))):null},pe=n(132),ye=function(e){var t=e.onInit1,n=e.step1,l=e.onInit2,o=e.step2,c=e.onInit3,i=e.step3,u=Object(a.useState)(0),s=Object(O.a)(u,2),m=s[0],d=s[1],f=Object(a.useState)([]),v=Object(O.a)(f,2),b=v[0],h=v[1],p=function(){d(m+1),h([t()])};return 0==b.length&&p(),r.a.createElement(S.a,{container:!0,xs:12},null==b[0]?null:r.a.createElement(n,{key:"".concat(m,"-1"),show:1===b.length,initState:b[0],onNextStep:function(e){h([b[0],l(e)])}}),null==b[1]?null:r.a.createElement(o,{key:"".concat(m,"-2"),show:2===b.length,initState:b[1],onPrevStep:function(){h([b[0]])},onNextStep:function(e){h([b[0],b[1],c(e)])}}),null==b[2]?null:r.a.createElement(i,{key:"".concat(m,"-3"),show:3===b.length,initState:b[2],onPrevStep:function(){h([b[0],b[1]])},onRestart:p}))},ge=n(39),Ee=Object(m.a)((function(){return Object(d.a)({logo:{marginRight:15,backgroundColor:"white"},horizontalFill:{flex:"1 0 auto"},toolbarIcon:{height:24,width:24,fill:"white"}})})),je=function(e){var t=e.repoUrl,n=Ee();return r.a.createElement(b.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement(h.a,{alt:"Logo",src:"/android-chrome-512x512.png",className:n.logo}),r.a.createElement(E.a,{variant:"h6",className:n.horizontalFill},"DK\u7684\u8dd1\u56e2\u8bb0\u5f55\u7740\u8272\u5668"),r.a.createElement(y.a,{"aria-label":"GitHub",href:t,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(i.a,{svg:s.a.svg,className:n.toolbarIcon}))))},Oe=function(e){return r.a.createElement(ye,{onInit1:function(){return{}},step1:ae,onInit2:function(e){var t=function(e,t){var n=e.players,a=e.lines,r=D()(t.players||{}),l=!0,o=!1,c=void 0;try{for(var i,u=n[Symbol.iterator]();!(l=(i=u.next()).done);l=!0){var s=i.value,m=A(r,s.allPlayerIds);m||(m={enabled:!0,displayName:s.name,color:F(z,r)});var d=!0,f=!1,v=void 0;try{for(var b,h=s.allPlayerIds[Symbol.iterator]();!(d=(b=h.next()).done);d=!0){r[b.value]=m}}catch(p){f=!0,v=p}finally{try{d||null==h.return||h.return()}finally{if(f)throw v}}}}catch(p){o=!0,c=p}finally{try{l||null==u.return||u.return()}finally{if(o)throw c}}return{lines:a,playerIds:n.map((function(e){return e.playerId})),nextConfig:Object(j.a)({},t,{players:r})}}(e,Object(ge.a)());return{lines:t.lines,playerIds:t.playerIds,config:t.nextConfig}},step2:he,onInit3:function(e){var t=Object(ge.a)();return Object(ge.b)(e.newConfig),{lines:e.lines,config:e.newConfig,oldConfig:t}},step3:pe.a})},Ce=Object(f.a)({palette:{primary:{main:"#795548"},secondary:{main:"#00897b"}}}),Se=function(){return r.a.createElement(v.a,{theme:Ce},r.a.createElement("div",{className:"root"},r.a.createElement(je,{repoUrl:"https://github.com/dkwingsmt/log-painter"}),r.a.createElement(p.a,{maxWidth:"md",className:"Body-container"},r.a.createElement(Oe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(139),r=n(141),l=Object(a.a)((function(e){return Object(r.a)({Control:{display:"flex",marginTop:20},Body:{},Container:{},ControlButton:{width:100,marginLeft:10}})}))},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n(85),r=n.n(a),l={players:{}};function o(){return r.a.get("config")||l}function c(e){r.a.set("config",e)}}},[[151,1,2]]]);
//# sourceMappingURL=main.8ee17adc.chunk.js.map