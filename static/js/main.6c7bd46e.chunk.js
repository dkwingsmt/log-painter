(this["webpackJsonplog-painter"]=this["webpackJsonplog-painter"]||[]).push([[0],{136:function(e,t,n){e.exports=n(265)},144:function(e,t,n){},145:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(10),l=n.n(o),c=n(115),i=n.n(c),u=n(116),s=n.n(u),f=n(309),m=n(324),p=n(123),d=n(318),v=n(316),y=n(328),b=n(319),g=n(314),h=n(317),O=n(79),j=(n(144),n(145),n(16)),E=n(12),w=n(308),P=n(310),C=n(322),S=n(323),k=n(307),x=n(305),N=n(306),D=n(304),I=function(e){var t=e.open,n=e.onClose,r=e.body;return a.a.createElement("div",null,a.a.createElement(S.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.a.createElement(D.a,null,"\u51fa\u9519\u5566"),a.a.createElement(x.a,null,a.a.createElement(N.a,{id:"alert-dialog-description"},r)),a.a.createElement(k.a,null,a.a.createElement(w.a,{onClick:n,color:"primary",autoFocus:!0},"\u597d\u7684"))))},L=Object(f.a)((function(e){return Object(m.a)({Control:{display:"flex",marginTop:20},Body:{},Container:{},ControlButton:{width:100,marginLeft:10}})})),B=n(118),W=n.n(B),R=n(119),$=n.n(R),M=n(77),A=n.n(M);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){if(null==e)return null;for(var t=e.content,n=[],r=0;r<t.length-2;r++){""===t[r]&&(t[r+1].match(/^.*\u64a4\u56de\u4e86\u4e00\u6761\u6d88\u606f( \u91cd\u65b0\u7f16\u8f91)?$/)||t[r+1].match(/^\u4f60\u548c.*\u6709\d+\u4e2a\u5171\u540c\u597d\u53cb\uff0c\u70b9\u51fb\u6dfb\u52a0\u597d\u53cb\u3002$/))&&(n.push(r),n.push(r+1),r++)}n.reverse();for(var a=0,o=n;a<o.length;a++){var l=o[a];t.splice(l,1)}return e}function V(e){if(null==e)return null;for(var t=e.content;t.length>0&&""===t[0].trim();)t.splice(0,1);for(;t.length>0&&""===t[t.length-1].trim();)t.splice(t.length-1,1);return 0===t.length?null:e}var q={headerParser:function(e){var t=new RegExp("^".concat(/(\d{4}-\d{2}-\d{2} \d{1,2}:\d{2}:\d{2}(?: (?:AM|PM))?) (.*?)/.source).concat(/(\(\d+\)|<.+@.+\..+>)/.source,"$")).exec(e);if(!t)return null;var n=Object(E.a)(t,4),r=(n[0],n[1]),a=n[2],o=n[3];return{player:{name:a,number:$()(o,"()<>")},time:r}},logLineConverter:function(e){return["10000","1000000"].includes(e.player.number||"")?null:V(e)}},H={headerParser:function(e){var t=/^(?:\u3010(.{1,6})\u3011)?(.*?) (\d{1,4}\/\d{1,2}\/\d{1,4} \d{1,2}:\d{2}:\d{2}(?: (?:AM|PM))?)$/.exec(e);if(!t)return null;var n=Object(E.a)(t,4),r=(n[0],n[1]);return{player:{name:n[2],title:r},time:n[3]}},logLineConverter:function(e){return A()(z,V)(e)}},J={headerParser:function(e){var t=/^(?:\u3010(.{1,6})\u3011)?(.*) (\d{1,2}:\d{2}:\d{2}(?: (?:AM|PM)))?$/.exec(e);if(!t)return null;var n=Object(E.a)(t,4),r=(n[0],n[1]);return{player:{name:n[2],title:r},time:n[3]}},logLineConverter:function(e){return A()(z,V)(e)}},U={headerParser:function(e){var t=/^(.*?)  (\d{1,2}:\d{2}:\d{2}) *$/.exec(e);if(!t)return null;var n=Object(E.a)(t,3);n[0];return{player:{name:n[1]},time:n[2]}},logLineConverter:function(e){return V(e)}};function G(e){var t=[],n=void 0,r=!0,a=!1,o=void 0;try{for(var l,c=function(){var e=l.value,r=function(){if(n)return n.headerParser(e);for(var t=0,r=[U,q,H,J];t<r.length;t++){var a=r[t],o=a.headerParser(e);if(o)return n=a,o}return null}();if(r)t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{content:[]}));else if(n){var a=t[t.length-1];a&&a.content.push(e)}},i=e.split("\n")[Symbol.iterator]();!(r=(l=i.next()).done);r=!0)c()}catch(u){a=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n?{logLines:W()(t.map(n.logLineConverter))}:{logLines:[]}}var K=n(120),T=n.n(K);function Y(e){var t=[];return e.number&&t.push("qq:".concat(e.number)),t.push("name:".concat(e.name)),t}var _=n(121),Q=n.n(_),X=n(122),Z=n.n(X),ee=n(124),te=n(55),ne=n.n(te);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ae={removeLinesStartedWithBracket:!1,removeLinesStartedWithDot:!1},oe=function(e,t){return e[t]||ae[t]},le=[{value:"black",name:"\u9ed1\u8272"},{value:"silver",name:"\u7070\u8272"},{value:"red",name:"\u7ea2\u8272"},{value:"green",name:"\u7eff\u8272"},{value:"orange",name:"\u6a58\u8272"},{value:"purple",name:"\u7d2b\u8272"},{value:"teal",name:"\u84dd\u7eff"},{value:"fuchsia",name:"\u6843\u7ea2"},{value:"yellow",name:"\u9ec4\u8272"},{value:"beige",name:"\u7c73\u8272"},{value:"brown",name:"\u68d5\u8272"},{value:"navy",name:"\u6df1\u84dd"},{value:"maroon",name:"\u7d2b\u7ea2"},{value:"limegreen",name:"\u83b1\u59c6"},{value:"white",name:"\u767d\u8272"},{value:"brown",name:"\u84dd\u8272"},{value:"pink",name:"\u7c89\u7ea2"}].map((function(e){var t=e.value;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(ee.a)(e,["value"]),{value:t,isLight:ne()(t).isLight()})}));function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=le.map((function(e){return e.value}));function se(e,t){var n=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value;if(e[c])return e[c]}}catch(i){r=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}return null}function fe(e,t){var n={};return Q()(t,(function(e){n[e.color]=!0})),e.find((function(e){return!n[e]}))||"black"}function me(e){return function(e){var t=[],n={},r=!0,a=!1,o=void 0;try{for(var l,c=e.logLines[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var i=l.value,u=i.player,s=i.time,f=i.content,m=Y(u),p=m[0];n[p]||(n[p]={playerId:p,allPlayerIds:m,name:u.name,number:u.number}),t.push({playerId:p,time:s,title:u.title,content:f})}}catch(d){a=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return{lines:t,players:T()(n)}}(G(e))}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var de=function(e){var t=e.onNextStep,n=L(),o=Object(r.useState)(""),l=Object(E.a)(o,2),c=l[0],i=l[1],u=Object(r.useState)({open:!1}),s=Object(E.a)(u,2),f=s[0],m=s[1];if(!e.show)return null;return a.a.createElement(P.a,{container:!0,className:n.Container},a.a.createElement(P.a,{item:!0,xs:12,className:n.Body},a.a.createElement(C.a,{id:"outlined-basic",label:"\u539f\u6587",placeholder:"\u628a\u539f\u6587\u7c98\u8d34\u5230\u8fd9\u91cc\uff0c\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\u3002",variant:"outlined",multiline:!0,fullWidth:!0,rows:10,className:"Source-textfield",onChange:function(e){i(e.target.value)},value:c})),a.a.createElement(P.a,{item:!0,xs:12,justify:"flex-end",className:n.Control},a.a.createElement(w.a,{variant:"contained",color:"primary",disabled:c.length<5,className:n.ControlButton,onClick:function(){var e=function(e){var t=me(e);if(0!==t.players.length&&0!==t.lines.length)return t;m({open:!0,body:"\u65e0\u6cd5\u4ece\u8fd9\u6bb5\u8bb0\u5f55\u4e2d\u627e\u5230\u53ef\u8bc6\u522b\u7684\u90e8\u5206\uff01\u8bf7\u68c0\u67e5\u540e\u518d\u8bd5\u4e00\u6b21\u5427\uff01"})}(c);e&&t(e)}},"\u4e0b\u4e00\u6b65")),a.a.createElement(I,Object.assign({onClose:function(){return m(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f,{open:!1}))}},f)))},ve=n(326),ye=n(325),be=n(315),ge=n(320),he=n(313);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=Object(f.a)((function(){return Object(m.a)({PlayerConfig:{},Center:{display:"flex",alignItems:"center"}})})),we=function(e){var t=Ee();return a.a.createElement(P.a,{item:!0,xs:6},a.a.createElement(P.a,{container:!0},a.a.createElement(P.a,{item:!0,xs:8},a.a.createElement(C.a,{defaultValue:e.name,variant:"outlined",fullWidth:!0,onBlur:function(t){e.setName(t.target.value||"")}})),a.a.createElement(P.a,{item:!0,xs:4,className:t.Center},a.a.createElement(P.a,{container:!0},a.a.createElement(he.a,{row:!0,className:t.Center},a.a.createElement(ye.a,null,a.a.createElement(ve.a,{checked:e.enabled,onChange:function(t,n){e.setEnabled(n)},value:"primary"})),a.a.createElement(ye.a,{style:e.enabled?{}:{visibility:"hidden"}},a.a.createElement(ge.a,{style:{backgroundColor:e.color,color:ne()(e.color).isLight()?"black":"white",padding:4},native:!0,value:e.color,onChange:function(t){e.setColor(t.target.value)}},le.map((function(e){var t=e.value,n=e.name,r=e.isLight;return a.a.createElement("option",{key:t,value:t,style:{backgroundColor:t,color:r?"black":"white"}},n||t)})))))))))},Pe=function(e){var t=e.playerIds,n=e.players,r=e.setPlayer;return a.a.createElement(P.a,{container:!0},t.map((function(e){var t=n[e];return a.a.createElement(we,{key:e,name:t.displayName,setName:function(n){r(e,je({},t,{displayName:n}))},enabled:t.enabled,setEnabled:function(n){r(e,je({},t,{enabled:n}))},color:t.color,setColor:function(n){r(e,je({},t,{color:n}))}})})))},Ce=function(e){var t=e.value,n=e.setValue;return a.a.createElement(he.a,null,a.a.createElement(be.a,{control:a.a.createElement(ve.a,{checked:oe(t,"removeLinesStartedWithBracket"),onChange:function(e){n(je({},t,{removeLinesStartedWithBracket:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5\uff08\u5f00\u5934\u7684\u884c"}),a.a.createElement(be.a,{control:a.a.createElement(ve.a,{checked:oe(t,"removeLinesStartedWithDot"),onChange:function(e){n(je({},t,{removeLinesStartedWithDot:e.target.checked}))},color:"primary"}),label:"\u53bb\u6389\u4ee5\u3002\u5f00\u5934\u7684\u884c"}))},Se=function(e){var t=e.initState,n=e.onPrevStep,o=e.onNextStep,l=L(),c=Object(r.useState)((function(){return t.config.players||{}})),i=Object(E.a)(c,2),u=i[0],s=i[1],f=Object(r.useRef)(t.playerIds),m=Object(r.useState)((function(){return t.config.general||{}})),p=Object(E.a)(m,2),d=p[0],v=p[1],y=Object(r.useRef)(t.lines);return e.show?a.a.createElement(P.a,{container:!0,className:l.Container},a.a.createElement(P.a,{item:!0,xs:12,className:l.Body},a.a.createElement(Ce,{value:d,setValue:v}),a.a.createElement(Pe,{playerIds:f.current,players:u,setPlayer:function(e,t){s(je({},u,Object(j.a)({},e,t)))}})),a.a.createElement(P.a,{item:!0,xs:12,justify:"flex-end",className:l.Control},a.a.createElement(w.a,{variant:"outlined",color:"secondary",className:l.ControlButton,onClick:n},"\u4e0a\u4e00\u6b65"),a.a.createElement(w.a,{variant:"contained",color:"primary",className:l.ControlButton,onClick:function(){o({lines:y.current,newConfig:{players:u,general:d}})}},"\u4e0b\u4e00\u6b65"))):null},ke=n(78),xe=n.n(ke),Ne={players:{}};function De(){return xe.a.get("config")||Ne}function Ie(e){xe.a.set("config",e)}var Le=Object(f.a)((function(){return Object(m.a)({Output:{fontFamily:"\u5fae\u8f6f\u96c5\u9ed1",fontSize:14,padding:"18.5px 14px",borderColor:"#0000003b","&:hover":{borderColor:"#000000de"},borderStyle:"solid",borderWidth:1,borderRadius:4,maxHeight:200,overflowY:"scroll","& > p":{margin:"0.5em 0"}}})})),Be=function(e){var t=e.initState,n=e.onPrevStep,o=e.onRestart,l=L(),c=Le(),i=Object(r.useRef)(t.oldConfig),u=Object(r.useRef)(t.config.players||{}),s=Object(r.useState)((function(){return function(e,t){var n=e;return oe(t,"removeLinesStartedWithBracket")&&(n=n.filter((function(e){return!["\uff08","("].includes(e.content[0][0])}))),oe(t,"removeLinesStartedWithDot")&&(n=n.filter((function(e){return!["\u3002","."].includes(e.content[0][0])}))),n}(t.lines,t.config.general||{})})),f=Object(E.a)(s,1)[0];return e.show?a.a.createElement(P.a,{container:!0,className:l.Container},a.a.createElement(P.a,{item:!0,xs:12,className:l.Body},a.a.createElement("div",{className:c.Output,onDoubleClick:function(){var e=window.getSelection();if(e){var t=document.getElementById("result");if(t){var n=document.createRange();n.selectNode(t),e.removeAllRanges(),e.addRange(n)}}},id:"result"},f.map((function(e,t){var n=e.playerId,r=e.content,o=u.current[n];return o.enabled?a.a.createElement("p",{key:t,style:{color:o.color}},"<".concat(o.displayName,"> "),r.map((function(e,t){return(0===t?[]:[a.a.createElement("br",{key:"br-".concat(t)})]).concat([a.a.createElement("span",{key:t},e)])}))):null})))),a.a.createElement(P.a,{item:!0,xs:12,justify:"flex-end",className:l.Control},a.a.createElement(w.a,{variant:"outlined",color:"secondary",className:l.ControlButton,onClick:function(){Ie(i.current),n()}},"\u4e0a\u4e00\u6b65"),a.a.createElement(w.a,{variant:"contained",className:l.ControlButton,style:{backgroundColor:"#d4d45f"},onClick:o},"\u518d\u505a\u4e00\u56e2"))):null},We=function(e){var t=e.onInit1,n=e.step1,o=e.onInit2,l=e.step2,c=e.onInit3,i=e.step3,u=Object(r.useState)(0),s=Object(E.a)(u,2),f=s[0],m=s[1],p=Object(r.useState)([]),d=Object(E.a)(p,2),v=d[0],y=d[1],b=function(){m(f+1),y([t()])};return 0==v.length&&b(),a.a.createElement(P.a,{container:!0,xs:12},null==v[0]?null:a.a.createElement(n,{key:"".concat(f,"-1"),show:1==v.length,initState:v[0],onNextStep:function(e){y([v[0],o(e)])}}),null==v[1]?null:a.a.createElement(l,{key:"".concat(f,"-2"),show:2==v.length,initState:v[1],onPrevStep:function(){y([v[0]])},onNextStep:function(e){y([v[0],v[1],c(e)])}}),null==v[2]?null:a.a.createElement(i,{key:"".concat(f,"-3"),show:3==v.length,initState:v[2],onPrevStep:function(){y([v[0],v[1]])},onRestart:b}))},Re=Object(f.a)((function(){return Object(m.a)({logo:{marginRight:15,backgroundColor:"white"},horizontalFill:{flex:"1 0 auto"},toolbarIcon:{height:24,width:24,fill:"white"}})})),$e=function(e){var t=e.repoUrl,n=Re();return a.a.createElement(v.a,{position:"static"},a.a.createElement(h.a,null,a.a.createElement(y.a,{alt:"Logo",src:"/android-chrome-512x512.png",className:n.logo}),a.a.createElement(O.a,{variant:"h6",className:n.horizontalFill},"DK\u7684\u8dd1\u56e2\u8bb0\u5f55\u7740\u8272\u5668"),a.a.createElement(g.a,{"aria-label":"GitHub",href:t,target:"_blank",rel:"noopener noreferrer"},a.a.createElement(i.a,{svg:s.a.svg,className:n.toolbarIcon}))))},Me=function(e){return a.a.createElement(We,{onInit1:function(){return{}},step1:de,onInit2:function(e){var t=function(e,t){var n=e.players,r=e.lines,a=Z()(t.players||{}),o=!0,l=!1,c=void 0;try{for(var i,u=n[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var s=i.value,f=se(a,s.allPlayerIds);f||(f={enabled:!0,displayName:s.name,color:fe(ue,a)});var m=!0,p=!1,d=void 0;try{for(var v,y=s.allPlayerIds[Symbol.iterator]();!(m=(v=y.next()).done);m=!0){a[v.value]=f}}catch(b){p=!0,d=b}finally{try{m||null==y.return||y.return()}finally{if(p)throw d}}}}catch(b){l=!0,c=b}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}return{lines:r,playerIds:n.map((function(e){return e.playerId})),nextConfig:ie({},t,{players:a})}}(e,De());return{lines:t.lines,playerIds:t.playerIds,config:t.nextConfig}},step2:Se,onInit3:function(e){var t=De();return Ie(e.newConfig),{lines:e.lines,config:e.newConfig,oldConfig:t}},step3:Be})},Ae=Object(p.a)({palette:{primary:{main:"#795548"},secondary:{main:"#00897b"}}}),Fe=function(){return a.a.createElement(d.a,{theme:Ae},a.a.createElement("div",{className:"root"},a.a.createElement($e,{repoUrl:"https://github.com/dkwingsmt/log-painter"}),a.a.createElement(b.a,{maxWidth:"md",className:"Body-container"},a.a.createElement(Me,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[136,1,2]]]);
//# sourceMappingURL=main.6c7bd46e.chunk.js.map